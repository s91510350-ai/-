<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>大家醫計畫互動小遊戲</title>
<style>
body { font-family: 'Microsoft JhengHei', sans-serif; background-color: #f0f8ff; text-align: center; padding: 20px; }
h1 { color: #0073e6; }
.question { margin: 20px 0; font-size: 22px; }
.options button { display: block; margin: 10px auto; padding: 12px 25px; font-size: 18px; cursor: pointer; border-radius: 12px; border: 2px solid #0073e6; background-color: #fff; transition: 0.3s; }
.options button:hover { background-color: #cce6ff; transform: scale(1.05); }
.feedback { font-size: 18px; margin-top: 15px; font-weight: bold; }
#scoreBoard { font-size: 20px; margin-top: 10px; }
#badge { font-size: 28px; margin-left: 10px; }
.share { margin-top: 15px; }
.share button { background-color: #00c300; color: white; padding: 10px 20px; font-size: 18px; border-radius: 10px; border: none; cursor: pointer; }
.share button:hover { background-color: #00e600; }
.icon { width: 80px; margin: 10px auto; }
</style>
</head>
<body>

<h1>🎉大家醫計畫互動小遊戲🎉</h1>
<img id="icon" class="icon" src="https://i.imgur.com/1X4vXUw.png" alt="卡通醫生">

<div id="scoreBoard">
  <span id="score">分數: 0</span>
  <span id="badge"></span>
</div>

<div id="game">
  <div class="question" id="question"></div>
  <div class="options" id="options"></div>
  <div class="feedback" id="feedback"></div>
</div>

<div id="finalShare" class="share" style="display:none;">
  <button onclick="shareLINE()">LINE 分享邀請朋友參加</button>
</div>

<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
const questions = [
  { question:"家庭醫師可以幫你做哪些事情？", options:["提供個人化健康管理","協助轉診與療效追蹤","整合多重慢性病門診","以上皆是"], answer:3, explanation:"家庭醫師提供全面、在地化健康照護，讓就醫更方便、照顧不中斷。", icon:"https://i.imgur.com/1X4vXUw.png" },
  { question:"阿明有高血壓，他應該怎麼做才能健康管理？", options:["每天量血壓並記錄","偶爾量一次血壓","覺得不舒服才看醫生","自行上網查藥物"], answer:0, explanation:"定期量血壓並記錄，可讓家庭醫師追蹤療效，預防併發症。", icon:"https://i.imgur.com/2c1kY9Z.png" },
  { question:"當需要專科檢查時，家庭醫師可以怎麼幫你？", options:["開轉診單","直接叫你去醫院排隊","告訴你自己去掛號","不提供任何幫助"], answer:0, explanation:"家庭醫師能協助整合醫療資源，提供適當的轉診服務。", icon:"https://i.imgur.com/3I8jWde.png" },
  { question:"想維持健康，以下哪一項不是家庭醫師的建議？", options:["定期運動","均衡飲食","忽略定期健康檢查","控制體重"], answer:2, explanation:"家庭醫師建議民眾養成健康生活習慣，定期檢查很重要。", icon:"https://i.imgur.com/4M7IWwP.png" },
  { question:"使用健康存摺 App 的好處是什麼？", options:["隨時查看個人健康紀錄","可以自己開藥","不需要看醫生","只有醫院才看得到"], answer:0, explanation:"健康存摺讓民眾掌握自己的健康資訊，方便家庭醫師做整合管理。", icon:"https://i.imgur.com/5N1yLzD.png" }
];

let currentQuestion = 0;
let score = 0;
const badges = [{score:40, icon:"🥉 銅勳章"},{score:60, icon:"🥈 銀勳章"},{score:100, icon:"🥇 金勳章"}];

function showQuestion(){
    if(currentQuestion < questions.length){
        const q = questions[currentQuestion];
        document.getElementById('question').innerText = q.question;
        document.getElementById('icon').src = q.icon;
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = '';
        q.options.forEach((opt,index)=>{
            const btn = document.createElement('button');
            btn.innerText = opt;
            btn.onclick = ()=>checkAnswer(index);
            optionsDiv.appendChild(btn);
        });
        document.getElementById('feedback').innerText = '';
    }else{
        document.getElementById('game').style.display='none';
        document.getElementById('scoreBoard').innerHTML=`🎉遊戲結束！總分：${score} 分 ${getBadge(score)}🎉`;
        document.getElementById('finalShare').style.display='block';
    }
}

function checkAnswer(selected){
    const q = questions[currentQuestion];
    const feedback = document.getElementById('feedback');
    const correctSound = document.getElementById('correct-sound');
    const wrongSound = document.getElementById('wrong-sound');

    if(selected === q.answer){
        feedback.style.color='green';
        feedback.innerText=`✅ 答對！${q.explanation}`;
        correctSound.play();
        score += 20;
    }else{
        feedback.style.color='red';
        feedback.innerText=`❌ 答錯！${q.explanation}`;
        wrongSound.play();
    }

    updateBadge();
    currentQuestion++;
    setTimeout(showQuestion,2000);
}

function updateBadge(){
    let earnedBadge = "";
    for(let b of badges){
        if(score >= b.score) earnedBadge = b.icon;
    }
    document.getElementById('badge').innerText = earnedBadge;
}

function getBadge(score){
    for(let i=badges.length-1;i>=0;i--){
        if(score >= badges[i].score) return badges[i].icon;
    }
    return "";
}

function shareLINE(){
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent("🎉大家醫計畫互動小遊戲，快來挑戰吧！");
    window.open(`https://line.me/R/msg/text/?${text}%20${url}`,'_blank');
}

showQuestion();
</script>

</body>
</html>
